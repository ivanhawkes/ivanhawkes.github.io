<!doctype html><html>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<link rel=apple-touch-icon href=/img/apple-icon.png>
<link rel=icon href=/img/favicon.png>
<title>Life Reboot</title>
<meta name=twitter:card content="summary">
<meta name=twitter:title content="CRYENGINE Flowgraphs - Blacklists and Substitutions">
<meta name=twitter:description content="On a large project, such as a game built using CRYENGINE, structure, clarity and consistency can provide decent gains in productivity by reducing the time it takes to comprehend and perform simple tasks. Blacklists and substitutions for Flowgraph Nodes are one way to improve these parts of your project.">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top">
<div class=container-fluid>
<a class=navbar-brand href=https://ivanhawkes.github.io>Ivan Hawkes</a>
<button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#navbarSupportedContent aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span>
</button>
<div class="collapse navbar-collapse" id=navbarSupportedContent>
<ul class="navbar-nav me-auto mb-2 mb-lg-0">
<li class=nav-item>
<a href=https://ivanhawkes.github.iopost class="nav-link d-flex align-items-center">
<i class=bi-stickies></i>&#160;Posts
</a>
</li>
<li class=nav-item>
<a href=https://ivanhawkes.github.ioproject class="nav-link d-flex align-items-center">
<i class=bi-kanban></i>&#160;Our Projects
</a>
</li>
<li class=nav-item>
<a href=https://ivanhawkes.github.ioprofile class="nav-link d-flex align-items-center">
<i class=bi-file-earmark-person></i>&#160;Our Team
</a>
</li>
<li class=nav-item>
<a href=https://ivanhawkes.github.iorecipe class="nav-link d-flex align-items-center">
<i class=bi-egg-fried></i>&#160;Recipes
</a>
</li>
<li class=nav-item>
<a href=https://ivanhawkes.github.iogarden class="nav-link d-flex align-items-center">
<i class=bi-tree></i>&#160;Garden
</a>
</li>
<li class=nav-item>
<a href=https://ivanhawkes.github.ioplant class="nav-link d-flex align-items-center">
<i class=bi-flower1></i>&#160;Plants
</a>
</li>
<li class=nav-item>
<a href=https://ivanhawkes.github.ioabout class="nav-link d-flex align-items-center">
<i class=bi-person-lines-fill></i>&#160;About Us
</a>
</li>
</ul>
</div>
</div>
</nav>
<div class=container>
<div class=container>
<div class=row>
<div class="col text-center">
<h1>CRYENGINE Flowgraphs - Blacklists and Substitutions</h1>
<div class=card>
<div class="card-header card-header-image">
<a href=#pablo>
<img src=/img/site/category/cryengine.jpg class=card-img-top alt>
</a>
<div class=colored-shadow style=background-image:url(/img/site/category/cryengine.jpg);opacity:1></div>
</div>
<div class=card-body>
<p class=text-start></p>
</div>
</div>
</div>
</div>
<div class=row>
<div class=col-12>
<hr>
</div>
</div>
<div class=row>
<div class=col-6>
<p class=h6>
By Ivan Hawkes<br>March 20, 2015
</p>
</div>
<div class="col-6 text-end">
<a href="https://www.facebook.com/sharer/sharer.php?u=ivan.hawkes" class=btn target=_blank>
<i class=bi-facebook style=font-size:32px></i>
</a>
<a href="https://twitter.com/intent/tweet?url=%40ivanhawkes" class=btn target=_blank>
<i class=bi-twitter style=font-size:32px></i>
</a>
<a href="https://www.linkedin.com/shareArticle?mini=true&url=ivan-hawkes-a8386338" class=btn target=_blank>
<i class=bi-linkedin style=font-size:32px></i></a>
<a href="http://www.pinterest.com/pin/find/?url=ivanhawkes" class=btn target=_blank>
<i class=bi-pinterest style=font-size:32px></i></a>
</div>
</div>
<div class=row>
<div class=col-12>
<hr>
</div>
</div>
<div class=row>
<div class=col>
<p>On a large project, such as a game built using CRYENGINE, structure, clarity and consistency can provide decent gains in productivity by reducing the time it takes to comprehend and perform simple tasks. Blacklists and substitutions for Flowgraph Nodes are one way to improve these parts of your project.</p>
<p>Even an empty CRYENGINE project comes with a large number of supplied FlowGraph nodes, typically from CryAction, CryCommon or CryInput. Your project is likely to add dozens or even hundreds more. These can add a lot of useful functionality to your project but they are also a prime source of inconsistency.</p>
<p>The Flowgraphs that are shipped with the EaaS SDK were created over a period of ten years or more and often do not have a consistent naming scheme. Further, some input / output names have changed over the years, which can cause older projects to fail when loading the XML containing those Flowgraphs. Ideas about how the namespace should be arranged have also changed, quite substantially in the case of AI and audio.</p>
<p>CryTek have provided a means for development teams to rearrange and edit the names, input, and output ports for all the Flowgraph in their current and previous projects. You can use this to rename existing Flowgraph nodes and re-wire any old Flowgraph that depends on the old names. The way to do this is by creating two XML files, <strong>FlownodeBlacklist.xml</strong> and <strong>Substitutions.xml</strong>.</p>
<p>The first file we&rsquo;ll cover is <strong>FlownodeBlacklist.xml</strong> - which provides two key functions.</p>
<ul>
<li>the ability to remove any Flowgraph node from the engine</li>
<li>the ability to rename any Flowgraph node</li>
</ul>
<p>You&rsquo;ll find <strong>FlownodeBlacklist.xml</strong> in your <strong>GameSDK/Libs/FlowNodes</strong> folder. If you haven&rsquo;t yet extracted this from the <strong>GameSDK/GameData.Pak</strong> file, then you should extract a copy of it now from the PAK file.</p>
<p>The file is a simple XML based file that is read at runtime by CryAction. It requires a top level tag <strong></strong> and supports two tags below that level.</p>
<p>Over time some features become deprecated or undesirable to use or fall out of favour to a different method of achieving the same goal. The first tag you need to know about is which is used to remove an unwanted Flowgraph node from the engine.</p>
<p>e.g.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=color:#f92672>&lt;Rem</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;AI:AIAwareness&#34;</span> <span style=color:#f92672>/&gt;</span>
</code></pre></div><p>This would remove the AI:AIAwareness node from the list of nodes available for placement in Flowgraphs. Add one tag for each Flowgraph node you wish to remove.</p>
<p>The second tag is which allows you to rename an existing node</p>
<p>e.g.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=color:#f92672>&lt;Ren</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;AI:AIActiveCount&#34;</span> <span style=color:#a6e22e>newClass=</span><span style=color:#e6db74>&#34;AI:ActiveCount&#34;</span><span style=color:#f92672>/&gt;</span>
</code></pre></div><p>In this case the AI:AIActiveCount node is renamed to AI:ActiveCount.</p>
<p>New projects may not have large amounts of existing Flowgraph to convert over to the new names, but older projects would likely see large amounts of breakage from removing and renaming nodes using the blacklist. That&rsquo;s where the <strong>Substitutions.xml</strong> file comes into play.</p>
<p><strong>Substitutions.xml</strong> is used to convert your existing Flowgraph logic from one naming scheme to another dynamically while loading levels. By placing suitable entries into this file, you can ensure that older work will seamlessly switch to using your brilliant and insightful new naming scheme for the Flowgraph nodes in your project (including renaming CryAction, etc, nodes).</p>
<p>You&rsquo;ll find <strong>Substitutions.xml</strong> in your <strong>GameSDK/Libs/FlowNodes</strong> folder. If you haven&rsquo;t yet extracted this from the <strong>GameSDK/GameData.Pak</strong> file, then you should extract a copy of it now from the PAK file.</p>
<p>The file begins with a top level tag <strong></strong>. Under that tag will be zero or more tags, each of which declare how you want to remap older Flowgraphs to your new naming scheme</p>
<p>e.g.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=color:#f92672>&lt;Node</span> <span style=color:#a6e22e>OldClass=</span><span style=color:#e6db74>&#34;entity:MissionObjective&#34;</span> <span style=color:#a6e22e>NewClass=</span><span style=color:#e6db74>&#34;entity:MissionObjective&#34;</span><span style=color:#f92672>&gt;</span>
	<span style=color:#f92672>&lt;InputPort</span>  <span style=color:#a6e22e>OldName=</span><span style=color:#e6db74>&#34;DisableObjective&#34;</span> <span style=color:#a6e22e>NewName=</span><span style=color:#e6db74>&#34;Deactivate&#34;</span> <span style=color:#f92672>/&gt;</span>
	<span style=color:#f92672>&lt;InputPort</span>  <span style=color:#a6e22e>OldName=</span><span style=color:#e6db74>&#34;EnableObjective&#34;</span>  <span style=color:#a6e22e>NewName=</span><span style=color:#e6db74>&#34;Activate&#34;</span> <span style=color:#f92672>/&gt;</span>
	<span style=color:#f92672>&lt;OutputPort</span> <span style=color:#a6e22e>OldName=</span><span style=color:#e6db74>&#34;DisableObjective&#34;</span> <span style=color:#a6e22e>NewName=</span><span style=color:#e6db74>&#34;Deactivated&#34;</span> <span style=color:#f92672>/&gt;</span>
	<span style=color:#f92672>&lt;OutputPort</span> <span style=color:#a6e22e>OldName=</span><span style=color:#e6db74>&#34;EnableObjective&#34;</span>  <span style=color:#a6e22e>NewName=</span><span style=color:#e6db74>&#34;Activated&#34;</span> <span style=color:#f92672>/&gt;</span>
<span style=color:#f92672>&lt;/Node&gt;</span>
</code></pre></div><p>In this example we are going to rename all occurrences of entity:MissionObjective to entity:MissionObjective, which may seem a little pointless - but is required because this example also shows how to rename ports.</p>
<p>You&rsquo;ll notice the port &lsquo;DisableObjective&rsquo; has been rewired to be &lsquo;Deactivate&rsquo; instead, and &lsquo;EnableObjective&rsquo; has been rewired to use &lsquo;Activate&rsquo; instead. This is to match changes to the port names in the c++ code. If any old graphs used the old port names, they wouldn&rsquo;t work correctly with the updated GameSDK DLL. This applies to both input and output ports.</p>
<p>Let&rsquo;s take a look at another example which has remapped a value as well as the port names.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=color:#f92672>&lt;Node</span> <span style=color:#a6e22e>OldClass=</span><span style=color:#e6db74>&#34;Physics:ActionImpulse&#34;</span> <span style=color:#a6e22e>NewClass=</span><span style=color:#e6db74>&#34;Physics:ActionImpulse&#34;</span><span style=color:#f92672>&gt;</span>
	<span style=color:#f92672>&lt;InputPort</span> <span style=color:#a6e22e>OldName=</span><span style=color:#e6db74>&#34;impulseDirection&#34;</span> <span style=color:#a6e22e>NewName=</span><span style=color:#e6db74>&#34;impulse&#34;</span> <span style=color:#a6e22e>RemapValue=</span><span style=color:#e6db74>&#34;1&#34;</span><span style=color:#f92672>/&gt;</span>
	<span style=color:#f92672>&lt;InputPort</span> <span style=color:#a6e22e>OldName=</span><span style=color:#e6db74>&#34;Momentum&#34;</span> <span style=color:#a6e22e>NewName=</span><span style=color:#e6db74>&#34;angImpulse&#34;</span> <span style=color:#a6e22e>RemapValue=</span><span style=color:#e6db74>&#34;1&#34;</span><span style=color:#f92672>/&gt;</span>
<span style=color:#f92672>&lt;/Node&gt;</span>
</code></pre></div><p>Notice in this example the &lsquo;RemapValue&rsquo; key which is being used to change the values found in the old &lsquo;impulseDirection&rsquo; and &lsquo;Momentum&rsquo; keys (to a new value of &lsquo;1&rsquo;) while simultaneously mapping the connectors to new ports named &lsquo;impulse&rsquo; and &lsquo;angImpulse&rsquo;.</p>
<p>Finally, let&rsquo;s look at the simple example, where you just want to rename a node without changing any port names or forcing new values into existing values.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=color:#f92672>&lt;Node</span> <span style=color:#a6e22e>OldClass=</span><span style=color:#e6db74>&#34;Start&#34;</span> <span style=color:#a6e22e>NewClass=</span><span style=color:#e6db74>&#34;Game:Start&#34;</span> <span style=color:#f92672>/&gt;</span>
</code></pre></div><p>There we are simply renaming &lsquo;Start&rsquo; to &lsquo;Game:Start&rsquo;, making it more consistent with the rest of the engine.</p>
<h3 id=summary>Summary</h3>
<p>These two XML files give you total control over how the Flowgraph nodes are presented to your team, including those found in CryTek code, and a means to seamlessly update any existing work to the new standards you set down.</p>
</div>
</div>
<div class=row>
<div class=col-12>
<hr>
</div>
</div>
<div class=row>
<div class=col>
<p class=h6>
Discover more posts like this:
</p>
<p class=h6>
<a class="btn btn-primary" href=/tags/cryengine3>
CryEngine3
</a>
<a class="btn btn-primary" href=/tags/flowgraph>
FlowGraph
</a>
<a class="btn btn-primary" href=/tags/flowgraph>
Flowgraph
</a>
<a class="btn btn-primary" href=/tags/game-programming>
Game Programming
</a>
</p>
</div>
</div>
<div class=row>
<div class=col>
<hr>
</div>
</div>
<div class=row>
<div class="col-6 text-start">
Previous:<br><a href=https://ivanhawkes.github.io/post/mediawiki-on-the-beaglebone-black/> MediaWiki on the Beaglebone Black</a>
</div>
<div class="col-6 text-end">
Next:<br><a href=https://ivanhawkes.github.io/post/cryengine-3-7-source-control-and-perforce/> CRYENGINE 3.7 Source Control and Perforce</a>
</div>
</div>
</div>
</div>
<footer>
<div class=row>
<div class=col>
<hr>
</div>
</div>
<nav class="navbar navbar-expand-lg">
<div class=container-fluid>
&copy; 2021 Ivan Hawkes all rights reserved.
</div>
</nav>
</footer>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css integrity=sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3 crossorigin=anonymous>
<script src=https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js integrity=sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM crossorigin=anonymous></script>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/bootstrap-icons@1.6.0/font/bootstrap-icons.css integrity=sha384-7ynz3n3tAGNUYFZD3cWe5PDcE36xj85vyFkawcF6tIwxvIecqKvfwLiaFdizhPpN crossorigin=anonymous>
<link rel=stylesheet type=text/css href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons">
</body>
</html>