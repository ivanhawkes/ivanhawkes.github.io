<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=apple-touch-icon href=/img/apple-icon.png><link rel=icon href=/img/favicon.png><title>Life Reboot</title>
<meta name=twitter:card content="summary"><meta name=twitter:title content="Adding New Actions to CryEngine 3 FreeSDK"><meta name=twitter:description content="This tutorial will help you add new actions into CryEngine 3 FreeSDK projects without needing to make any changes to the base code provided by CryTek."><meta name=twitter:site content="@ivanhawkes"></head><body><nav class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top"><div class=container-fluid><a class=navbar-brand href=https://ivanhawkes.github.io/>Ivan Hawkes</a>
<button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#navbarSupportedContent aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarSupportedContent><ul class="navbar-nav me-auto mb-2 mb-lg-0"><li class=nav-item><a href=https://ivanhawkes.github.io/post class="nav-link d-flex align-items-center"><i class=bi-stickies></i>&#160;Posts</a></li><li class=nav-item><a href=https://ivanhawkes.github.io/project class="nav-link d-flex align-items-center"><i class=bi-kanban></i>&#160;Our Projects</a></li><li class=nav-item><a href=https://ivanhawkes.github.io/profile class="nav-link d-flex align-items-center"><i class=bi-file-earmark-person></i>&#160;Our Team</a></li><li class=nav-item><a href=https://ivanhawkes.github.io/recipe class="nav-link d-flex align-items-center"><i class=bi-egg-fried></i>&#160;Recipes</a></li><li class=nav-item><a href=https://ivanhawkes.github.io/garden class="nav-link d-flex align-items-center"><i class=bi-tree></i>&#160;Garden</a></li><li class=nav-item><a href=https://ivanhawkes.github.io/plant class="nav-link d-flex align-items-center"><i class=bi-flower1></i>&#160;Plants</a></li><li class=nav-item><a href=https://ivanhawkes.github.io/about class="nav-link d-flex align-items-center"><i class=bi-person-lines-fill></i>&#160;About Us</a></li></ul></div></div></nav><div class=container><div class=container><div class=row><div class="col text-center"><h1>Adding New Actions to CryEngine 3 FreeSDK</h1><div class=card><div class="card-header card-header-image"><a href=#pablo><img src=/img/site/category/programming.jpg class=card-img-top alt></a><div class=colored-shadow style=background-image:url(/img/site/category/programming.jpg);opacity:1></div></div><div class=card-body><p class=text-start></p></div></div></div></div><div class=row><div class=col-12><hr></div></div><div class=row><div class=col-6><p class=h6>By Ivan Hawkes<br>December 9, 2013</p></div><div class="col-6 text-end"><a href="https://www.facebook.com/sharer/sharer.php?u=ivan.hawkes" class=btn target=_blank><i class=bi-facebook style=font-size:32px></i>
</a><a href="https://twitter.com/intent/tweet?url=%40ivanhawkes" class=btn target=_blank><i class=bi-twitter style=font-size:32px></i>
</a><a href="https://www.linkedin.com/shareArticle?mini=true&url=ivan-hawkes-a8386338" class=btn target=_blank><i class=bi-linkedin style=font-size:32px></i></a>
<a href="http://www.pinterest.com/pin/find/?url=ivanhawkes" class=btn target=_blank><i class=bi-pinterest style=font-size:32px></i></a></div></div><div class=row><div class=col-12><hr></div></div><div class=row><div class=col><p>This tutorial will help you add new actions into CryEngine 3 FreeSDK projects without needing to make any changes to the base code provided by CryTek.</p><p>Recently I went to add a new feature to my CryEngine 3 FreeSDK project. This feature needed to add new actions (camera zoom in and out), and it seemed at first it wasn&rsquo;t possible to add them without at least making some changes to Gameactions.actions and GameActions.cpp. It actually seemed to require a lot of changes to key parts of the code, and making these changes would make applying upgrades to the SDK much harder at a later date. I made a first pass at the problem, and the results were pretty ugly. There had to be a better way, and thanks to some guidance from older members, and sample code, I found that way.</p><p>Rather than just hacking into Gameactions.actions and GameActions.cpp you should instead try to use the Cry method, which is generally to provide a listener class and subscribe to messages from the publisher. In this particular case we are going to need to provide an IActionListener, and a TActionHandler implementation.</p><p>For this example, I am going to use a FlowNode class, that needs to extend itself to handle a couple of action events - namely, mouse key presses. This FlowNode is part of the <a href=https://github.com/hendrikp/Plugin_Camera title="Camera Plugin">camera plugin</a> for CryEngine, based on the <a href=https://github.com/hendrikp/Plugin_SDK title="CryEngine Plugin SDK">plugin SDK</a> from Hendrik.</p><p>First things first, whatever class you wish to extend, you need to make sure it supports the IActionListener interface. Add this to your class declaration. e.g.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>CFlowPlayerCameraNode</span> <span style=color:#f92672>:</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> CFlowBaseNode<span style=color:#f92672>&lt;</span>eNCT_Instanced<span style=color:#f92672>&gt;</span>,
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> IActionListener
</span></span></code></pre></div><p>You will need to add an ActionHandler to your class. In this case I have used a static:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#66d9ef>static</span> TActionHandler<span style=color:#f92672>&lt;</span>CFlowPlayerCameraNode<span style=color:#f92672>&gt;</span> s_actionHandler;
</span></span></code></pre></div><p>This will be responsible for dispatching any action requests to their handlers.</p><p>Next, within the initialisation routines for your class you will need to grab a pointer to the ActionMapManager, and use this to add handlers for your custom actions, like so:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span>CFlowPlayerCameraNode(SActivationInfo <span style=color:#f92672>*</span>pActInfo)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    m_pEntity <span style=color:#f92672>=</span> NULL;
</span></span><span style=display:flex><span>    m_pCameraEnt <span style=color:#f92672>=</span> NULL;
</span></span><span style=display:flex><span>    m_pCameraView <span style=color:#f92672>=</span> NULL;
</span></span><span style=display:flex><span>    tpvZoom <span style=color:#f92672>=</span> <span style=color:#ae81ff>1.0f</span>;
</span></span><span style=display:flex><span>    tpvZoomMin <span style=color:#f92672>=</span> <span style=color:#ae81ff>0.0f</span>;
</span></span><span style=display:flex><span>    tpvZoomMax <span style=color:#f92672>=</span> <span style=color:#ae81ff>1.0f</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Add some mappings to the action maps.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>if</span> (gEnv <span style=color:#f92672>&amp;&amp;</span> gEnv<span style=color:#f92672>-&gt;</span>pGame <span style=color:#f92672>&amp;&amp;</span> gEnv<span style=color:#f92672>-&gt;</span>pGame<span style=color:#f92672>-&gt;</span>GetIGameFramework() <span style=color:#f92672>&amp;&amp;</span> gEnv<span style=color:#f92672>-&gt;</span>pGame<span style=color:#f92672>-&gt;</span>GetIGameFramework()<span style=color:#f92672>-&gt;</span>GetIActionMapManager())
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Sugar.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        IActionMapManager <span style=color:#f92672>*</span>pActionMapManager <span style=color:#f92672>=</span> gEnv<span style=color:#f92672>-&gt;</span>pGame<span style=color:#f92672>-&gt;</span>GetIGameFramework()<span style=color:#f92672>-&gt;</span>GetIActionMapManager();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// We can declare the actions and assign their names here, but only as a two step process.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        ActionId tpv_ZoomIn;
</span></span><span style=display:flex><span>        ActionId tpv_ZoomOut;
</span></span><span style=display:flex><span>        ActionId v_tpv_ZoomIn;
</span></span><span style=display:flex><span>        ActionId v_tpv_ZoomOut;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        tpv_ZoomIn <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;tpv_zoom_in&#34;</span>;
</span></span><span style=display:flex><span>        tpv_ZoomOut <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;tpv_zoom_out&#34;</span>;
</span></span><span style=display:flex><span>        v_tpv_ZoomIn <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;v_tpv_zoom_in&#34;</span>;
</span></span><span style=display:flex><span>        v_tpv_ZoomOut <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;v_tpv_zoom_out&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Grab the action map manager.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        pActionMapManager<span style=color:#f92672>-&gt;</span>AddExtraActionListener(<span style=color:#66d9ef>this</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// The actions for zooming in and out should be filtered, same as other actions. These filters
</span></span></span><span style=display:flex><span><span style=color:#75715e>// are the parts of the game where we do not wish to have that action called.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#75715e>#define FILTER_ACTION(filter, action) pActionMapManager-&gt;GetActionFilter(filter)-&gt;Filter(action);
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        FILTER_ACTION(<span style=color:#e6db74>&#34;no_move&#34;</span>, tpv_ZoomIn)
</span></span><span style=display:flex><span>        FILTER_ACTION(<span style=color:#e6db74>&#34;no_move&#34;</span>, tpv_ZoomOut)
</span></span><span style=display:flex><span>        FILTER_ACTION(<span style=color:#e6db74>&#34;no_move&#34;</span>, v_tpv_ZoomIn)
</span></span><span style=display:flex><span>        FILTER_ACTION(<span style=color:#e6db74>&#34;no_move&#34;</span>, v_tpv_ZoomOut)
</span></span><span style=display:flex><span>        FILTER_ACTION(<span style=color:#e6db74>&#34;no_mouse&#34;</span>, tpv_ZoomIn)
</span></span><span style=display:flex><span>        FILTER_ACTION(<span style=color:#e6db74>&#34;no_mouse&#34;</span>, tpv_ZoomOut)
</span></span><span style=display:flex><span>        FILTER_ACTION(<span style=color:#e6db74>&#34;no_mouse&#34;</span>, v_tpv_ZoomIn)
</span></span><span style=display:flex><span>        FILTER_ACTION(<span style=color:#e6db74>&#34;no_mouse&#34;</span>, v_tpv_ZoomOut)
</span></span><span style=display:flex><span>        FILTER_ACTION(<span style=color:#e6db74>&#34;tutorial_no_move&#34;</span>, tpv_ZoomIn)
</span></span><span style=display:flex><span>        FILTER_ACTION(<span style=color:#e6db74>&#34;tutorial_no_move&#34;</span>, tpv_ZoomOut)
</span></span><span style=display:flex><span>        FILTER_ACTION(<span style=color:#e6db74>&#34;tutorial_no_move&#34;</span>, v_tpv_ZoomIn)
</span></span><span style=display:flex><span>        FILTER_ACTION(<span style=color:#e6db74>&#34;tutorial_no_move&#34;</span>, v_tpv_ZoomOut)
</span></span><span style=display:flex><span>        FILTER_ACTION(<span style=color:#e6db74>&#34;warning_popup&#34;</span>, tpv_ZoomIn)
</span></span><span style=display:flex><span>        FILTER_ACTION(<span style=color:#e6db74>&#34;warning_popup&#34;</span>, tpv_ZoomOut)
</span></span><span style=display:flex><span>        FILTER_ACTION(<span style=color:#e6db74>&#34;warning_popup&#34;</span>, v_tpv_ZoomIn)
</span></span><span style=display:flex><span>        FILTER_ACTION(<span style=color:#e6db74>&#34;warning_popup&#34;</span>, v_tpv_ZoomOut)
</span></span><span style=display:flex><span>        FILTER_ACTION(<span style=color:#e6db74>&#34;cutscene_player_moving&#34;</span>, tpv_ZoomIn)
</span></span><span style=display:flex><span>        FILTER_ACTION(<span style=color:#e6db74>&#34;cutscene_player_moving&#34;</span>, tpv_ZoomOut)
</span></span><span style=display:flex><span>        FILTER_ACTION(<span style=color:#e6db74>&#34;cutscene_player_moving&#34;</span>, v_tpv_ZoomIn)
</span></span><span style=display:flex><span>        FILTER_ACTION(<span style=color:#e6db74>&#34;cutscene_player_moving&#34;</span>, v_tpv_ZoomOut)
</span></span><span style=display:flex><span>        FILTER_ACTION(<span style=color:#e6db74>&#34;cutscene_train&#34;</span>, tpv_ZoomIn)
</span></span><span style=display:flex><span>        FILTER_ACTION(<span style=color:#e6db74>&#34;cutscene_train&#34;</span>, tpv_ZoomOut)
</span></span><span style=display:flex><span>        FILTER_ACTION(<span style=color:#e6db74>&#34;cutscene_train&#34;</span>, v_tpv_ZoomIn)
</span></span><span style=display:flex><span>        FILTER_ACTION(<span style=color:#e6db74>&#34;cutscene_train&#34;</span>, v_tpv_ZoomOut)
</span></span><span style=display:flex><span>        FILTER_ACTION(<span style=color:#e6db74>&#34;scoreboard&#34;</span>, tpv_ZoomIn)
</span></span><span style=display:flex><span>        FILTER_ACTION(<span style=color:#e6db74>&#34;scoreboard&#34;</span>, tpv_ZoomOut)
</span></span><span style=display:flex><span>        FILTER_ACTION(<span style=color:#e6db74>&#34;scoreboard&#34;</span>, v_tpv_ZoomIn)
</span></span><span style=display:flex><span>        FILTER_ACTION(<span style=color:#e6db74>&#34;scoreboard&#34;</span>, v_tpv_ZoomOut)
</span></span><span style=display:flex><span>        FILTER_ACTION(<span style=color:#e6db74>&#34;infiction_menu&#34;</span>, tpv_ZoomIn)
</span></span><span style=display:flex><span>        FILTER_ACTION(<span style=color:#e6db74>&#34;infiction_menu&#34;</span>, tpv_ZoomOut)
</span></span><span style=display:flex><span>        FILTER_ACTION(<span style=color:#e6db74>&#34;infiction_menu&#34;</span>, v_tpv_ZoomIn)
</span></span><span style=display:flex><span>        FILTER_ACTION(<span style=color:#e6db74>&#34;infiction_menu&#34;</span>, v_tpv_ZoomOut)
</span></span><span style=display:flex><span>        FILTER_ACTION(<span style=color:#e6db74>&#34;mp_weapon_customization_menu&#34;</span>, tpv_ZoomIn)
</span></span><span style=display:flex><span>        FILTER_ACTION(<span style=color:#e6db74>&#34;mp_weapon_customization_menu&#34;</span>, tpv_ZoomOut)
</span></span><span style=display:flex><span>        FILTER_ACTION(<span style=color:#e6db74>&#34;mp_weapon_customization_menu&#34;</span>, v_tpv_ZoomIn)
</span></span><span style=display:flex><span>        FILTER_ACTION(<span style=color:#e6db74>&#34;mp_weapon_customization_menu&#34;</span>, v_tpv_ZoomOut)
</span></span><span style=display:flex><span>        FILTER_ACTION(<span style=color:#e6db74>&#34;ledge_grab&#34;</span>, tpv_ZoomIn)
</span></span><span style=display:flex><span>        FILTER_ACTION(<span style=color:#e6db74>&#34;ledge_grab&#34;</span>, tpv_ZoomOut)
</span></span><span style=display:flex><span>        FILTER_ACTION(<span style=color:#e6db74>&#34;ledge_grab&#34;</span>, v_tpv_ZoomIn)
</span></span><span style=display:flex><span>        FILTER_ACTION(<span style=color:#e6db74>&#34;ledge_grab&#34;</span>, v_tpv_ZoomOut)
</span></span><span style=display:flex><span><span style=color:#75715e>#undef FILTER_ACTION
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Only add the handlers once.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#75715e>// TODO: look into multiple instances and how it affects this whole section of code.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>if</span> (s_actionHandler.GetNumHandlers() <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span>)
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            <span style=color:#75715e>// Map the actions to their handlers.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            s_actionHandler.AddHandler(tpv_ZoomIn, <span style=color:#f92672>&amp;</span>CFlowPlayerCameraNode<span style=color:#f92672>::</span>OnActionZoomIn);
</span></span><span style=display:flex><span>            s_actionHandler.AddHandler(tpv_ZoomOut, <span style=color:#f92672>&amp;</span>CFlowPlayerCameraNode<span style=color:#f92672>::</span>OnActionZoomOut);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// Zoom while in vehicles maps to the same actions.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            s_actionHandler.AddHandler(v_tpv_ZoomIn, <span style=color:#f92672>&amp;</span>CFlowPlayerCameraNode<span style=color:#f92672>::</span>OnActionZoomIn);
</span></span><span style=display:flex><span>            s_actionHandler.AddHandler(v_tpv_ZoomOut, <span style=color:#f92672>&amp;</span>CFlowPlayerCameraNode<span style=color:#f92672>::</span>OnActionZoomOut);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>While a bit wordy, what this code achieves is fairly simple. First, we need to make sure we grab a pointer to the ActionMapMapper. We declare four ActionId variables and set their values. Next, we set the present class up as a listener for actions, this extends the default ActionMapManager, allowing calls to our own.</p><p>This is followed by a large block of code which deals with filtering out the actions when they are not desirable.</p><p>Finally, we add a few action handlers. In this case we are getting two actions (zoom and vehicle zoom) to both perform the same action.</p><p>We need to clean up whatever we allocate in the constructor, so our destructor looks like:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>virtual</span> <span style=color:#f92672>~</span>CFlowPlayerCameraNode()
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> ( gEnv <span style=color:#f92672>&amp;&amp;</span> gEnv<span style=color:#f92672>-&gt;</span>pGame <span style=color:#f92672>&amp;&amp;</span> gEnv<span style=color:#f92672>-&gt;</span>pGame<span style=color:#f92672>-&gt;</span>GetIGameFramework() <span style=color:#f92672>&amp;&amp;</span> gEnv<span style=color:#f92672>-&gt;</span>pGame<span style=color:#f92672>-&gt;</span>GetIGameFramework()<span style=color:#f92672>-&gt;</span>GetIActionMapManager() )
</span></span><span style=display:flex><span>	{
</span></span><span style=display:flex><span>		gEnv<span style=color:#f92672>-&gt;</span>pGame<span style=color:#f92672>-&gt;</span>GetIGameFramework()<span style=color:#f92672>-&gt;</span>GetIActionMapManager()<span style=color:#f92672>-&gt;</span>RemoveExtraActionListener( <span style=color:#66d9ef>this</span> );
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>We need to provide an OnAction handler, since we implement IActionListener. In this case we pass off handling of actions to our action handler:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>virtual</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>OnAction</span>( <span style=color:#66d9ef>const</span> ActionId<span style=color:#f92672>&amp;</span> action, <span style=color:#66d9ef>int</span> activationMode, <span style=color:#66d9ef>float</span> value )
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>	s_actionHandler.Dispatch( <span style=color:#66d9ef>this</span>, <span style=color:#ae81ff>0</span>, action, activationMode, value );
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>We also need a pair of routines to handle the actions. In this case they look like:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>bool</span> <span style=color:#a6e22e>OnActionZoomIn</span>( EntityId entityId, <span style=color:#66d9ef>const</span> ActionId<span style=color:#f92672>&amp;</span> actionId, <span style=color:#66d9ef>int</span> activationMode, <span style=color:#66d9ef>float</span> value )
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>	tpvZoom <span style=color:#f92672>=</span> MAX( tpvZoom <span style=color:#f92672>-</span> <span style=color:#ae81ff>0.05f</span>, tpvZoomMin );
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> false;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>bool</span> <span style=color:#a6e22e>OnActionZoomOut</span>( EntityId entityId, <span style=color:#66d9ef>const</span> ActionId<span style=color:#f92672>&amp;</span> actionId, <span style=color:#66d9ef>int</span> activationMode, <span style=color:#66d9ef>float</span> value )
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>	tpvZoom <span style=color:#f92672>=</span> MIN( tpvZoom <span style=color:#f92672>+</span> <span style=color:#ae81ff>0.05f</span>, tpvZoomMax );
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> false;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>It&rsquo;s pretty simple, they increment or decrement a float value by 0.05, within the confines of a pair of bounds.</p><p>Right near the bottom we need to declare a variable to hold the static we declared in our class:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span>
</span></span><span style=display:flex><span>TActionHandler<span style=color:#f92672>&lt;</span>CFlowPlayerCameraNode<span style=color:#f92672>&gt;</span> CFlowPlayerCameraNode<span style=color:#f92672>::</span>s_actionHandler;
</span></span></code></pre></div><p>That&rsquo;s the bulk of the changes needed to extend any class to handle it&rsquo;s own action mapped events. You can view the complete source as a part of the <a href=https://github.com/hendrikp/Plugin_Camera title="Plugin Camera Code">plugin camera code</a>.</p><p>There&rsquo;s one more step, however. You will need to add a few lines to your defaultprofile.xml file. In this particular case you will need to add a pair of lines like:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;action</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;tpv_zoom_in&#34;</span> <span style=color:#a6e22e>onPress=</span><span style=color:#e6db74>&#34;1&#34;</span> <span style=color:#a6e22e>keyboard=</span><span style=color:#e6db74>&#34;mwheel_up&#34;</span> <span style=color:#f92672>/&gt;</span> <span style=color:#f92672>&lt;action</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;tpv_zoom_out&#34;</span> <span style=color:#a6e22e>onPress=</span><span style=color:#e6db74>&#34;1&#34;</span> <span style=color:#a6e22e>keyboard=</span><span style=color:#e6db74>&#34;mwheel_down&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span></code></pre></div><p>and to apply the zoom when inside a vehicle add a pair of lines like:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;action</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;v_tpv_zoom_in&#34;</span> <span style=color:#a6e22e>onPress=</span><span style=color:#e6db74>&#34;1&#34;</span> <span style=color:#a6e22e>keyboard=</span><span style=color:#e6db74>&#34;mwheel_up&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;action</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;v_tpv_zoom_out&#34;</span> <span style=color:#a6e22e>onPress=</span><span style=color:#e6db74>&#34;1&#34;</span> <span style=color:#a6e22e>keyboard=</span><span style=color:#e6db74>&#34;mwheel_down&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span></code></pre></div></div></div><div class=row><div class=col-12><hr></div></div><div class=row><div class=col><p class=h6>Discover more posts like this:</p><p class=h6><a class="btn btn-primary" href=/tags/c++>C++
</a><a class="btn btn-primary" href=/tags/cryengine3>CryEngine3
</a><a class="btn btn-primary" href=/tags/flowgraph>Flowgraph
</a><a class="btn btn-primary" href=/tags/software-development>Software Development</a></p></div></div><div class=row><div class=col><hr></div></div><div class=row><div class="col-6 text-start">Previous:<br><a href=https://ivanhawkes.github.io/post/google-app-engine-go-and-go-restful/>Google App Engine, Go and Go-RESTful</a></div><div class="col-6 text-end">Next:<br><a href=https://ivanhawkes.github.io/post/introducing-cryengine-3-event-listeners/>Introducing CryEngine 3 Event Listeners</a></div></div></div></div><footer><div class=row><div class=col><hr></div></div><nav class="navbar navbar-expand-lg"><div class=container-fluid>&copy; 2021 Ivan Hawkes all rights reserved.</div></nav></footer><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css integrity=sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3 crossorigin=anonymous><script src=https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js integrity=sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM crossorigin=anonymous></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/bootstrap-icons@1.6.0/font/bootstrap-icons.css integrity=sha384-7ynz3n3tAGNUYFZD3cWe5PDcE36xj85vyFkawcF6tIwxvIecqKvfwLiaFdizhPpN crossorigin=anonymous><link rel=stylesheet type=text/css href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons"></body></html>