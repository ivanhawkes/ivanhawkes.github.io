<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=apple-touch-icon href=/img/apple-icon.png><link rel=icon href=/img/favicon.png><title>Life Reboot</title><meta name=twitter:card content="summary"><meta name=twitter:title content="How to Make .PAK Files With Your Assets"><meta name=twitter:description content="Something that doesn&rsquo;t seem to receive much coverage is what to do with all your awesome assets once you&rsquo;ve made your game. You&rsquo;re going to need to ship them to end users, and the best way is within a .PAK file."></head><body><nav class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top"><div class=container-fluid><a class=navbar-brand href=https://ivanhawkes.github.io/>Ivan Hawkes</a>
<button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#navbarSupportedContent aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarSupportedContent><ul class="navbar-nav me-auto mb-2 mb-lg-0"><li class=nav-item><a href=https://ivanhawkes.github.io/post class="nav-link d-flex align-items-center"><i class=bi-stickies></i>&#160;Posts</a></li><li class=nav-item><a href=https://ivanhawkes.github.io/project class="nav-link d-flex align-items-center"><i class=bi-kanban></i>&#160;Our Projects</a></li><li class=nav-item><a href=https://ivanhawkes.github.io/profile class="nav-link d-flex align-items-center"><i class=bi-file-earmark-person></i>&#160;Our Team</a></li><li class=nav-item><a href=https://ivanhawkes.github.io/recipe class="nav-link d-flex align-items-center"><i class=bi-egg-fried></i>&#160;Recipes</a></li><li class=nav-item><a href=https://ivanhawkes.github.io/garden class="nav-link d-flex align-items-center"><i class=bi-tree></i>&#160;Garden</a></li><li class=nav-item><a href=https://ivanhawkes.github.io/plant class="nav-link d-flex align-items-center"><i class=bi-flower1></i>&#160;Plants</a></li><li class=nav-item><a href=https://ivanhawkes.github.io/about class="nav-link d-flex align-items-center"><i class=bi-person-lines-fill></i>&#160;About Us</a></li></ul></div></div></nav><div class=container><div class=container><div class=row><div class="col text-center"><h1>How to Make .PAK Files With Your Assets</h1><div class=card><div class="card-header card-header-image"><a href=#pablo><img src=/img/site/category/cryengine.jpg class=card-img-top alt></a><div class=colored-shadow style=background-image:url(/img/site/category/cryengine.jpg);opacity:1></div></div><div class=card-body><p class=text-start></p></div></div></div></div><div class=row><div class=col-12><hr></div></div><div class=row><div class=col-6><p class=h6>By Ivan Hawkes<br>July 25, 2013</p></div><div class="col-6 text-end"><a href="https://www.facebook.com/sharer/sharer.php?u=ivan.hawkes" class=btn target=_blank><i class=bi-facebook style=font-size:32px></i></a>
<a href="https://twitter.com/intent/tweet?url=%40ivanhawkes" class=btn target=_blank><i class=bi-twitter style=font-size:32px></i></a>
<a href="https://www.linkedin.com/shareArticle?mini=true&url=ivan-hawkes-a8386338" class=btn target=_blank><i class=bi-linkedin style=font-size:32px></i></a>
<a href="http://www.pinterest.com/pin/find/?url=ivanhawkes" class=btn target=_blank><i class=bi-pinterest style=font-size:32px></i></a></div></div><div class=row><div class=col-12><hr></div></div><div class=row><div class=col><p>Something that doesn&rsquo;t seem to receive much coverage is what to do with all your awesome assets once you&rsquo;ve made your game. You&rsquo;re going to need to ship them to end users, and the best way is within a .PAK file.</p><p>The tricky part is how to make those .PAK files.</p><p>There is already a .NET app that can do the packing for you, but I like things old school. I like scripts and I like to run on the bare metal with as much control as possible. The documentation mentions you can use the RC (resource compiler) to pack for consoles&mldr;but it alluded that you might be able to use it for more. I spent a few hours reading up about the resource compiler to see just what it could do. It turns out it can do everything you should need if you&rsquo;re willing to write a few XML files.</p><p>For my project I need to be able to create a new script .PAK file and another few .PAK files for my various sorts of resources. I wanted them to have names similar to the default ones that ship with the SDK, but not the same, so they don&rsquo;t clash and overwrite each other. I also wanted to be able to just build them again whenever I needed them with low effort on my part.</p><p>Before we start, you will need to be familiar with the DOS Command line and have ensured the RC.EXE is somewhere in your Windows path. There is plenty of help for both of these topics available via Google.</p><p>Let&rsquo;s start with the SCRIPTS.PAK file. My version of this file will be called CORESCRIPTS.PAK to avoid conflicts. The first thing we will need is to create a batch file that can be called which will invoke the resource compiler.</p><p>NOTE: You can download all the example files from <a href=http://www.mediafire.com/download/3zaa5e4dbdi4894/PackagingExamples.rar title="Example Files">MediaFire</a>.</p><p>For example:</p><pre tabindex=0><code class=language-dos data-lang=dos>rc /job=CoreSystemScriptPAK.xml /p=PC /threads=8 &gt; CoreSystemScript-PAK.log
</code></pre><p>Whenever you call this batch file it will invoke the resource compiler and start compiling the job called <strong>CoreSystemScriptPAK.xml</strong> telling it to compile for the PC version. I have a quad core PC so I tell it to use 8 threads to put all the cores into full use. The output is capture to a log file named <strong>CoreSystemScript-PAK.log</strong> which I can view in a text editor looking for errors.</p><p>If you have your path correctly set you will be able to place this batch file into your <strong>c:/cryengine3/game</strong> folder (or wherever your install is) and double click it to run the packaging code.</p><p>This will of course require you to also drop a file called <strong>CoreSystemScriptPAK.xml</strong> into the game folder. Here&rsquo;s my current one as a sample.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;RCJobs&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--
</span></span></span><span style=display:flex><span><span style=color:#75715e>DefaultProperties - these can be overriden from command line.
</span></span></span><span style=display:flex><span><span style=color:#75715e>pak_root - defines the output folder for PAK files (required for NAnt build system)
</span></span></span><span style=display:flex><span><span style=color:#75715e>--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;DefaultProperties</span> <span style=color:#a6e22e>cry_root=</span><span style=color:#e6db74>&#34;c:\cryengine3&#34;</span> <span style=color:#a6e22e>game=</span><span style=color:#e6db74>&#34;Game&#34;</span> <span style=color:#a6e22e>engine=</span><span style=color:#e6db74>&#34;Engine&#34;</span> <span style=color:#a6e22e>target=</span><span style=color:#e6db74>&#34;TempRC\${p}&#34;</span> <span style=color:#a6e22e>pak_root=</span><span style=color:#e6db74>&#34;OutRC\${p}&#34;</span> <span style=color:#a6e22e>enable_cuda=</span><span style=color:#e6db74>&#34;true&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;Properties</span> <span style=color:#a6e22e>xml_types=</span><span style=color:#e6db74>&#34;*.animevents;*.cdf;*.chrparams;*.dlg;*.ent;*.fsq;*.fxl;*.ik;*.lmg;*.mtl;*.setup;*.xml;*.node;*.veg&#34;</span> <span style=color:#a6e22e>non_xml_types=</span><span style=color:#e6db74>&#34;*.ag;*.gfx;*.png;*.usm;*.fev;*.fsb;*.fdp;*.sfk;*.ogg;*.txt;*.anm;*.cal;*.grd;*.grp;*.cfg;*.csv;*.lua;*.dat;*.ini;*.xls;*.as;*.lut;*.mp2;*.mp3;*.xma&#34;</span> <span style=color:#a6e22e>source_game=</span><span style=color:#e6db74>&#34;${cry_root}\${game}&#34;</span> <span style=color:#a6e22e>target_game=</span><span style=color:#e6db74>&#34;${target}\${game}&#34;</span> <span style=color:#a6e22e>src_engine=</span><span style=color:#e6db74>&#34;${cry_root}\${engine}&#34;</span> <span style=color:#a6e22e>target_engine=</span><span style=color:#e6db74>&#34;${target}\${engine}&#34;</span> <span style=color:#a6e22e>pak_game=</span><span style=color:#e6db74>&#34;${pak_root}\${game}&#34;</span> <span style=color:#a6e22e>pak_engine=</span><span style=color:#e6db74>&#34;${pak_root}\${engine}&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!-- Choose an image compressor based on CUDA support availability --&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;if</span> <span style=color:#a6e22e>enable_cuda=</span><span style=color:#e6db74>&#34;true&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;Properties</span> <span style=color:#a6e22e>imagecompressor=</span><span style=color:#e6db74>&#34;NvTT&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/if&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;ifnot</span> <span style=color:#a6e22e>enable_cuda=</span><span style=color:#e6db74>&#34;true&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;Properties</span> <span style=color:#a6e22e>imagecompressor=</span><span style=color:#e6db74>&#34;NvDxt&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/ifnot&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;CleanJob&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;Job</span> <span style=color:#a6e22e>input=</span><span style=color:#e6db74>&#34;&#34;</span> <span style=color:#a6e22e>targetroot=</span><span style=color:#e6db74>&#34;${target}&#34;</span> <span style=color:#a6e22e>clean_targetroot=</span><span style=color:#e6db74>&#34;1&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/CleanJob&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;CopyJob&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;Job</span> <span style=color:#a6e22e>sourceroot=</span><span style=color:#e6db74>&#34;${source_game}\Entities&#34;</span> <span style=color:#a6e22e>input=</span><span style=color:#e6db74>&#34;*&#34;</span> <span style=color:#a6e22e>targetroot=</span><span style=color:#e6db74>&#34;${target_game}\Entities&#34;</span> <span style=color:#a6e22e>copyonly=</span><span style=color:#e6db74>&#34;1&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;Job</span> <span style=color:#a6e22e>sourceroot=</span><span style=color:#e6db74>&#34;${source_game}\Scripts&#34;</span> <span style=color:#a6e22e>input=</span><span style=color:#e6db74>&#34;*&#34;</span> <span style=color:#a6e22e>targetroot=</span><span style=color:#e6db74>&#34;${target_game}\Scripts&#34;</span> <span style=color:#a6e22e>copyonly=</span><span style=color:#e6db74>&#34;1&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;Job</span> <span style=color:#a6e22e>sourceroot=</span><span style=color:#e6db74>&#34;${src_engine}\Shaders&#34;</span> <span style=color:#a6e22e>input=</span><span style=color:#e6db74>&#34;*.ext;*.cfx;*.cfi;*.txt&#34;</span> <span style=color:#a6e22e>targetroot=</span><span style=color:#e6db74>&#34;${target_engine}\Shaders&#34;</span> <span style=color:#a6e22e>copyonly=</span><span style=color:#e6db74>&#34;1&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/CopyJob&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;PakJob&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;if</span> <span style=color:#a6e22e>p=</span><span style=color:#e6db74>&#34;PC&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>&lt;!-- Create a PAK file for scripts and their entities --&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;Job</span> <span style=color:#a6e22e>sourceroot=</span><span style=color:#e6db74>&#34;${target_game}&#34;</span> <span style=color:#a6e22e>input=</span><span style=color:#e6db74>&#34;Entities\*.*&#34;</span> <span style=color:#a6e22e>zip=</span><span style=color:#e6db74>&#34;${pak_game}\CoreScripts.pak&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;Job</span> <span style=color:#a6e22e>sourceroot=</span><span style=color:#e6db74>&#34;${target_game}&#34;</span> <span style=color:#a6e22e>input=</span><span style=color:#e6db74>&#34;Scripts\*.*&#34;</span> <span style=color:#a6e22e>zip=</span><span style=color:#e6db74>&#34;${pak_game}\CoreScripts.pak&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;/if&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>&lt;!-- Create a PAK file for Shaders --&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;Job</span> <span style=color:#a6e22e>sourceroot=</span><span style=color:#e6db74>&#34;${target_engine}&#34;</span> <span style=color:#a6e22e>input=</span><span style=color:#e6db74>&#34;Shaders\*.ext;Shaders\*.cfi;Shaders\*.cfx&#34;</span> <span style=color:#a6e22e>zip=</span><span style=color:#e6db74>&#34;${pak_engine}\CoreShaders.pak&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/PakJob&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;Run</span> <span style=color:#a6e22e>Job=</span><span style=color:#e6db74>&#34;CleanJob&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;Run</span> <span style=color:#a6e22e>Job=</span><span style=color:#e6db74>&#34;CopyJob&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;Run</span> <span style=color:#a6e22e>Job=</span><span style=color:#e6db74>&#34;PakJob&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/RCJobs&gt;</span>
</span></span></code></pre></div><p>It looks a little more intimidating than it actually is. Head over to the <a href=http://freesdk.crydev.net/display/SDKDOC3/Compiling+Assets+for+Multiple+Platforms title="Compiling Assets for Multiple Platforms">official documentation</a> for a minute to see what all that gubbins is doing.</p><p>Let&rsquo;s just hit the important things to get you started, since the rest you can figure out by reading the docs. In the DefaultProperties section if your cry_root is not at &ldquo;c:\cryengine3&rdquo; then update this entry to point to the root folder. Now, skip over most of the boilerplate XML and take a note of the three jobs I have defined - cleanjob, copyjob and pakjob.</p><p><strong>Cleanjob</strong> provides a convenient way to clean up the stray files for a job. It&rsquo;s pretty much stock in this implementation.</p><p><strong>Copyjob</strong> is going to copy just the files I want over into the packing folders. In this case I am after the Entites, Scripts and Shaders folders.</p><p><strong>Pakjob</strong> does the hard work of packing the target files into a .PAK file for you. You can see I added three jobs, one for the Entities, one for the Scripts and a final one for the shaders.</p><p>The three commands at the bottom run the three jobs I have defined in that specific order. This will clean my packaging directory for me, copy over the current set of files I am interested in, and pack them all into a shiny new .PAK file which can be shipped to testing / end users / etc.</p><p>There&rsquo;s a second pair of examples which are more complex, but follow the same basic principle. These example files will pack all the &lsquo;core&rsquo; files for me. I am keeping all my work separate from the CryEngine sample files and placing them under sub-folders, generally named &lsquo;core&rsquo; or &lsquo;user&rsquo; or &rsquo;team&rsquo; in these examples. You are free to place your files wherever you wish and amend the examples as needed.</p><p>If you flick through the <strong>CoreSystemPAK.XML</strong> file you should be able to see how it sets the base properties for my assets, converts any TIFFs I need to DDS files, and copies files into .PAK files of my choosing. The end result of running these two batch files will be a set of .PAK files with all of my present assets neatly packed into them at the correct quality settings. I will have five .PAK files :</p><ul><li>CoreGameData.PAK - levels</li><li>CoreMaterials.PAK - materials</li><li>CoreObjects.PAK - objects</li><li>CoreScripts.PAK - scripts / entities</li><li>CoreTextures.PAK - textures</li></ul><p>It is quite simple to extend these for when I add music, animation, sounds and the like.</p><p>There&rsquo;s a little bit of reading required upfront to create these files, though hopefully not too much now you have the examples to work from. The time you spend setting this up early in your project will pay you back tenfold over numerous release iterations.</p><p>Benefits of this method over using <a href=https://github.com/returnString/Drehevel title=DRHEVEL>DRHEVEL</a> are:</p><ul><li>total control - you can do anything the RC can do using this</li><li>you can book these files into source control</li><li>fast and clean - once setup a new release is a double click away or the command line if you want to make it part of an automatic build procedure</li><li>compatibility - no issues with ZIP formats</li><li>all textures are known to be compressed to the correct format for shipping</li></ul><p><a href=https://github.com/returnString/Drehevel title=DRHEVEL>DRHEVEL</a> can get you most of the way, but if you need that little more control then give this method a try.</p></div></div><div class=row><div class=col-12><hr></div></div><div class=row><div class=col><p class=h6>Discover more posts like this:</p><p class=h6><a class="btn btn-primary" href=/tags/asset-management>Asset Management</a>
<a class="btn btn-primary" href=/tags/cryengine3>CryEngine3</a>
<a class="btn btn-primary" href=/tags/games>Games</a>
<a class="btn btn-primary" href=/tags/software-development>Software Development</a></p></div></div><div class=row><div class=col><hr></div></div><div class=row><div class="col-6 text-start">Previous:<br><a href=https://ivanhawkes.github.io/post/building-a-cheap-motion-capture-studio/>Building A Cheap Motion Capture Studio</a></div><div class="col-6 text-end">Next:<br><a href=https://ivanhawkes.github.io/post/joining-stonerage/>Joining StoneRage</a></div></div></div></div><footer><div class=row><div class=col><hr></div></div><nav class="navbar navbar-expand-lg"><div class=container-fluid>&copy; 2021 Ivan Hawkes all rights reserved.</div></nav></footer><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css integrity=sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3 crossorigin=anonymous><script src=https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js integrity=sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM crossorigin=anonymous></script>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/bootstrap-icons@1.6.0/font/bootstrap-icons.css integrity=sha384-7ynz3n3tAGNUYFZD3cWe5PDcE36xj85vyFkawcF6tIwxvIecqKvfwLiaFdizhPpN crossorigin=anonymous><link rel=stylesheet type=text/css href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons"></body></html>